To copy important files to AWS, run the following commands from the lever-labs-server root directory.
Locally, run `npm run build`

Staging:
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem ./package.json ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem ./package-lock.json ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem ./.env.production ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src/.env.staging
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem ./ecosystem.config.js ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem ./.npmrc ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/classes ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/controllers ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/db-operations ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/db-seed-data ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/middleware ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/prisma ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/routes ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/types ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./dist/src/utils ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-staging-ec2-keypair.pem -r ./prisma ubuntu@34.229.209.115:/home/ubuntu/blue-dot-robots/dist/src

Production:
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem ./package.json ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem ./package-lock.json ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem ./.env.production ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src/.env.production
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem ./ecosystem.config.js ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem ./.npmrc ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/classes ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/controllers ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/db-operations ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/db-seed-data ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/middleware ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/prisma ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/routes ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/types ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./dist/src/utils ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src
	scp -i /Users/arieltamayev/Documents/lever-labs-production-ec2.pem -r ./prisma ubuntu@54.81.65.153:/home/ubuntu/blue-dot-robots/dist/src

To SSH into AWS:
	Staging:
		aws ec2-instance-connect ssh --instance-id i-0151f137cb9067c1c --os-user ubuntu
	Prod:
		aws ec2-instance-connect ssh --instance-id i-0af414ad7e5d89c3e --os-user ubuntu

For Database migrations, navigate to dist/src, and run:
	npx prisma migrate deploy && npx prisma generate && pm2 restart 0 && pm2 logs;
	If nothing is working after doing a migration, try restarting the pm2 `pm2 restart 0`
	If there is new data to seed, run `npm run cloud-seed`

Shortcuts:
	Restart server after application update:
		cd blue-dot-robots/ && npm i --production && pm2 restart 0 && pm2 logs;
	DB (be in /dist/src folder)
		npx prisma migrate deploy && npx prisma generate && pm2 restart 0 && pm2 logs;

Other:
- If getting this error:  `Error: @prisma/client did not initialize yet. Please run "prisma generate" and try to import it again.`, run:
	`npx prisma generate` in the src directory
- If getting this error after a migration: `Unknown field `[field_name]` for select statement on model [model_name]...`
	Check that the field exists in PGAdmin (remote into the RDS box). If it does, run `npx prisma generate` in the src directory
- To save the Postgres Url to AWS's configuration, go into `nano ~/.bashrc`, to the end of the file, and add:
	export DATABASE_URL='your-database-url'.
	Save, and run `source ~/.bashrc`
	Run `echo $DATABASE_URL` to make sure the command ran correctly

- Update linux packages
	sudo apt update && sudo apt upgrade -y && sudo apt autoremove -y

Periodically locally run `depcheck` to see if any packages aren't being used
